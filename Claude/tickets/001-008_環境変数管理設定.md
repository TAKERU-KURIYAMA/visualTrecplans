# チケット001-008: 環境変数管理設定

## 概要
開発・本番環境で使用する環境変数の管理体制を構築し、セキュアな設定管理を実現する

## 優先度
高

## 親チケット
001_プロジェクト初期セットアップ

## 詳細タスク

### 1. フロントエンド環境変数設定
- [ ] .env.development作成
  ```env
  VITE_API_URL=http://localhost:8080/api/v1
  VITE_APP_NAME=VisualTrecplans
  VITE_APP_VERSION=1.0.0
  ```
- [ ] .env.production作成
  ```env
  VITE_API_URL=https://api.trecplans.com/api/v1
  VITE_APP_NAME=VisualTrecplans
  VITE_APP_VERSION=1.0.0
  ```
- [ ] .env.example作成（テンプレート）
- [ ] 環境変数の型定義
  ```typescript
  // src/types/env.d.ts
  interface ImportMetaEnv {
    readonly VITE_API_URL: string
    readonly VITE_APP_NAME: string
    readonly VITE_APP_VERSION: string
  }
  ```

### 2. バックエンド環境変数設定
- [ ] config/config.go作成
  ```go
  type Config struct {
      App      AppConfig
      Database DatabaseConfig
      JWT      JWTConfig
      Server   ServerConfig
  }

  type AppConfig struct {
      Name        string
      Environment string
      Version     string
  }

  type DatabaseConfig struct {
      Host     string
      Port     int
      User     string
      Password string
      DBName   string
      SSLMode  string
  }
  ```
- [ ] Viper設定の実装
- [ ] 環境変数の検証ロジック

### 3. Docker環境変数の統合
- [ ] docker-compose環境変数ファイル
  ```env
  # .env.docker
  POSTGRES_USER=trecplans
  POSTGRES_PASSWORD=password
  POSTGRES_DB=trecplans_dev
  ```
- [ ] 環境変数の注入設定
- [ ] ビルド時と実行時の変数分離

### 4. セキュリティ対策
- [ ] .gitignoreへの環境変数ファイル追加
  ```gitignore
  # Environment variables
  .env
  .env.*
  !.env.example
  !.env.docker.example
  ```
- [ ] シークレット管理方針の文書化
- [ ] 環境変数の暗号化検討

### 5. 環境変数ドキュメント作成
- [ ] 環境変数一覧表の作成
- [ ] 各変数の説明と必須/任意の明記
- [ ] 環境別の設定例
- [ ] トラブルシューティングガイド

## 受け入れ条件
- 環境変数が適切に読み込まれること
- 必須環境変数が未設定の場合にエラーとなること
- 環境変数ファイルがGitに含まれないこと
- ドキュメントが整備されていること

## 見積もり工数
3時間

## 報告コメント
✅ **完了** - 環境変数管理設定を完了しました。

### 実施内容
1. **フロントエンド環境変数設定**
   - `.env.development`の更新（API URL、アプリ名、バージョン追加）
   - `.env.production`の作成（本番環境用設定）
   - `.env.example`の更新（テンプレート整備）
   - TypeScript型定義(`src/types/env.d.ts`)の作成

2. **バックエンド環境変数設定**
   - `pkg/config/config.go`の作成（構造化設定管理）
   - Viper設定の実装（自動環境変数読み込み）
   - 環境変数の検証ロジック実装
   - アプリ、DB、JWT、サーバー、CORS設定の統合

3. **Docker環境変数の統合**
   - `.env.docker`の作成（Docker開発環境用）
   - `.env.docker.example`の作成（テンプレート）
   - PostgreSQL、Adminer、アプリケーション設定統合

4. **セキュリティ対策**
   - `.gitignore`の更新（フロント・バックエンド両方）
   - 環境変数ファイルの適切な除外設定
   - 本番環境でのシークレット検証実装

5. **環境変数ドキュメント作成**
   - `docs/environment-variables.md`の作成
   - 全環境変数の一覧表と説明
   - 環境別設定例とセットアップ手順
   - トラブルシューティングガイド

### 成果
- 開発・本番環境での設定管理体制が確立
- 型安全な環境変数アクセス（フロントエンド）
- 構造化された設定管理（バックエンド）
- Docker環境での開発効率向上
- セキュリティベストプラクティスの適用
- 包括的なドキュメント整備

### 未消化作業
なし（全タスク完了）